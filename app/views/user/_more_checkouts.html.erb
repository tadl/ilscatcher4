<a role="button" class="btn btn-block btn-primary mb-2 more-checkouts" data-remote="true" data-method="get" href="/checkout_history?page=<%= page %>&format=js">Load more items</a>

<script>
$.fn.isInViewport = function() {
  var elementTop = $(this).offset().top - 1000;
  var elementBottom = elementTop + $(this).outerHeight();
  var viewportTop = $(window).scrollTop();
  var viewportBottom = viewportTop + $(window).height();
  return elementBottom > viewportTop && elementTop < viewportBottom;
};

$(window).on('resize scroll', function() {
  var element = '.more-checkouts';
  var is_it_there = $(element);
  if (is_it_there.length) {
    var is_visible = $(element).isInViewport();
    if (is_visible == true) {
      $(element).click();
      $(element).remove();
      $('#more-checkouts').html('<h4 class="text-center"><i class="fas fa-asterisk spin"></i> Loading more items...</h4>');
    }
  }
});
</script>
