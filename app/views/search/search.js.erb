var item = document.createElement('div');
var grid = document.querySelector('#grid');
<% @search.results.each do |i| %>
  <% if @search.view == 'list' %>
    $("#items").append('<%= escape_javascript(render "list_item", i: i , search: @search) %>')
  <% elsif @search.view == 'grid' %>
    salvattore['append_elements'](grid, [item]);
    item.outerHTML = "<%= escape_javascript(render "grid_item", i: i , search: @search) %>";
  <% elsif @search.view == 'simple' %>
    $("#items").append('<%= escape_javascript(render "simple_item", i: i , search: @search) %>')
  <% end %>
<% end %>
<% if @search.more_results == true %>
  $("#more_results").html('<%= escape_javascript(render "more_results", search: @search) %>')
<% else %>
   $("#more_results").html('')
<% end %>
