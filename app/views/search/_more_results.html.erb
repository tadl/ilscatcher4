<%= link_to search_link_builder('next_page', @search) , remote: true, :method => :get, :type => 'button', :class => 'btn btn-block btn-primary mb-2 more_results' do %>
  Load More Results
<% end %>

<script>

$.fn.isInViewport = function() {
var elementTop = $(this).offset().top - 1000
var elementBottom = elementTop + $(this).outerHeight();

var viewportTop = $(window).scrollTop();
var viewportBottom = viewportTop + $(window).height();

return elementBottom > viewportTop && elementTop < viewportBottom;
};


$(window).on('resize scroll', function() {
  var is_it_there = $('.more_results')
  if(is_it_there.length){
    var is_visible = $('.more_results').isInViewport()
    if(is_visible == true){
      $('.more_results').click()
      $('.more_results').remove()
    }
  }
});
</script>